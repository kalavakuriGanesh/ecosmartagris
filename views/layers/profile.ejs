<main class="main-content">
    <header class="header">
        <h1>User Profile</h1>
    </header>

    <!-- Profile Details Section -->
    <div class="main-board">
        <section class="profile-details">
            <div class="profile-item">
                <strong>Name:</strong>
                <span><%= user.name %></span>
            </div>
            <div class="profile-item">
                <strong>Email:</strong>
                <span><%= user.email %></span>
            </div>
            <div class="profile-item">
                <strong>Phone:</strong>
                <span><%= user.phone %></span>
            </div>
            <div class="profile-item">
                <strong>Address:</strong>
                <span><%= user.address %></span>
            </div>
        
        </section>
    </div>

    <!-- Edit Profile Button -->
    <div class="edit-profile">
        <button id="editProfile">Edit Profile</button>
    </div>

    <!-- Editable Form (Hidden by Default) -->
    <div class="main-board">
        <section class="edit-profile-form" id="editProfileForm" style="display: none;">
            <form action="/update_profile" method="POST" autocomplete="off" onsubmit="return checkEmail(event);">
                <div class="form-group">
                    <label for="name">Name:</label>
                    <input type="text" id="name" name="name" value="<%= user.name %>" required>
                </div>
                <div class="form-group">
                    <label for="email">Email:</label>
                    <input type="email" id="email" name="email" value="<%= user.email %>" required>
                </div>
                <div class="form-group">
                    <label for="phone">Phone:</label>
                    <input type="text" id="phone" name="phone" value="<%= user.phone %>" required>
                </div>
                <div class="form-group">
                    <label for="address">Address:</label>
                    <input type="text" id="address" name="address" value="<%= user.address %>" required>
                </div>
            
                <button type="submit">Save Changes</button>
            </form>
        </section>
    </div>
</main>
<script>
    // JavaScript for toggling the Edit Profile form
    document.getElementById("editProfile").addEventListener("click",() => {
        const form = document.getElementById("editProfileForm");
        form.style.display = "block";
        // form.style.display = form.style.display === "none" ? "block" : "none";
        document.getElementById("editProfile").style.display = "none";
    });

    function validateEmail(email){
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        return emailRegex.test(email);
    }

    function checkEmail(event){
        const name = document.getElementById("name").value.trim();
        const email = document.getElementById("email").value.trim();
        const phone = document.getElementById("phone").value.trim();
        if(!validateEmail(email)){
            event.preventDefault();
            alert("Invalid Email")
            return false;
        } else if (!name){
            event.preventDefault();
            alert("Fill the Name");
            return false;
        } else if (!phone){
            event.preventDefault();
            alert("Fill the Phone Number");
            return false;
        } else if (!address) {
            event.preventDefault();
            alert("Fill the Address");
        }
        return true;
    }
</script>